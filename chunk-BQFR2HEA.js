import{a as R}from"./chunk-ZSRRXJJU.js";import{a as we,b as ne}from"./chunk-OSH75MHU.js";import{a as ge}from"./chunk-R3D3CR7Y.js";import{A as r,B as v,D as N,E as W,F as k,G as M,I as l,J as d,N as V,P as T,Q as O,R as ue,V as be,Z as fe,aa as ce,ba as ve,c as de,ca as B,d as $,da as j,e as pe,ea as D,fa as F,g as u,ga as H,h as b,ha as q,i as p,ia as z,j as f,ja as J,k as E,ka as K,l as G,la as Q,ma as X,n as h,o as S,oa as Y,p as me,pa as Z,q as o,qa as ee,r as n,ra as te,s as L,t as _,u as y,ua as Se,v as I,va as ie,w,wa as he,x,y as g,z as C}from"./chunk-B6J72TLZ.js";var A=class a{constructor(e,t){this.http=e;this.constService=t;this.BASE_URL=t.FULL_URL+"/weapon"}BASE_URL;getAllWeapons(){let e=this.BASE_URL;return this.http.get(e)}static \u0275fac=function(t){return new(t||a)(pe(be),pe(ve))};static \u0275prov=de({token:a,factory:a.\u0275fac,providedIn:"root"})};function Me(a,e){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let t=e.$implicit;g("value",t.id),p(),N("",d(2,3,t.full_name)," | ",d(3,5,t.abbreviation),"")}}function Ve(a,e){if(a&1&&(o(0,"option",26),r(1),n()),a&2){let t=e.$implicit;g("value",t.id),p(),v(t.nickname)}}function Te(a,e){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit;g("value",t.id),p(),v(d(2,2,t.name))}}function Oe(a,e){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let t=e.$implicit;g("value",t.id),p(),N("",d(2,3,t.full_name)," | ",d(3,5,t.abbreviation),"")}}function Be(a,e){if(a&1&&(o(0,"option",26),r(1),n()),a&2){let t=e.$implicit;g("value",t.id),p(),v(t.nickname)}}function je(a,e){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit;g("value",t.id),p(),v(d(2,2,t.name))}}var oe=class a{constructor(e,t,i,m,c,s,le){this.clanService=e;this.swpService=t;this.weaponService=i;this.routeService=m;this.combatService=c;this.authService=s;this.errorService=le}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.getClansWithEnabledPlayer(),this.getWeapons()}subscriptions=new D;clans=[];idClan1="";idClan2="";swordplayers1=[];idSwp1=0;swordplayers2=[];idSwp2=0;weapons=[];weapons1=[];weapons2=[];idWeapon1=0;idWeapon2=0;roundsScored1=0;roundsScored2=0;getClansWithEnabledPlayer(){this.clanService.getClansWithEnabledPlayers().subscribe({next:e=>{this.clans=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}getEnabledSwordplayersByClan(e,t){this.subscriptions.add=this.swpService.getEnabledPlayersByClan(e).subscribe({next:i=>{i.token&&this.authService.updateToken(i.token);let m=this.swpService.sortSwordplayers(i.data);t==1&&(e==this.idClan2&&(this.swordplayers2=this.swordplayers2),this.swordplayers1=m),t==2&&(e==this.idClan1&&(this.swordplayers1=this.swordplayers1),this.swordplayers2=m)},error:i=>{this.errorService.handler(i)}})}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:e=>{this.weapons=e.data,e.token&&this.authService.updateToken(e.token)},complete:()=>{this.refreshWeaponsList(1),this.refreshWeaponsList(2)},error:e=>{this.errorService.handler(e)}})}refreshWeaponsList(e){e==1&&(this.weapons1=[],this.weapons1=this.weapons),e==2&&(this.weapons2=[],this.weapons2=this.weapons)}getInputClan1(e){this.idClan1=e,this.swordplayers1=[],this.getInputSwordplayer1("0"),this.getEnabledSwordplayersByClan(this.idClan1,1)}getInputClan2(e){this.idClan2=e,this.swordplayers2=[],this.getInputSwordplayer2("0"),this.getEnabledSwordplayersByClan(this.idClan2,2)}getInputSwordplayer1(e){this.idSwp1=Number(e),this.refreshWeaponsList(1)}getInputSwordplayer2(e){this.idSwp2=Number(e),this.refreshWeaponsList(2)}getInputWeapon1(e){this.idWeapon1=Number(e),this.roundsScored1=0}getInputWeapon2(e){this.idWeapon2=Number(e),this.roundsScored2=0}toMenu(){this.routeService.navigate.toMenu()}resetForm(){this.roundsScored1=0,this.roundsScored2=0}newCombat(e,t,i,m,c,s){if(!e||!m||!t||!c||!i&&!s)return window.alert("Preencha todos os campos");if(e==m)return window.alert("Selecione swordplayers diferentes");if(i<0||s<0)return window.alert("Rounds n\xE3o podem ser negativos");if(i<2&&s<2)return window.alert("Ningu\xE9m atingiu 2 rounds ganhos");if(i+s>3)return window.alert("N\xE3o devem ser registrados mais de 3 rounds");let le=this.authService.getUserId();this.subscriptions.add=this.combatService.newcombat(e,t,i,m,c,s,le).subscribe({next:U=>{U.token&&this.authService.updateToken(U.token)},complete:()=>{window.alert("Combate registrado com sucesso"),this.resetForm()},error:U=>{this.errorService.handler(U)}})}static \u0275fac=function(t){return new(t||a)(f(he),f(we),f(A),f(B),f(R),f(j),f(F))};static \u0275cmp=E({type:a,selectors:[["app-combat-new"]],standalone:!1,decls:53,vars:8,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"value"]],template:function(t,i){if(t&1){let m=I();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),r(6,"Swordplayer 1"),n(),o(7,"select",11,0),w("change",function(){u(m);let s=C(8);return b(i.getInputClan1(s.value))}),o(9,"option",12),r(10,"Selecione o cl\xE3"),n(),h(11,Me,4,7,"option",13),n(),o(12,"select",14,1),w("change",function(){u(m);let s=C(13);return b(i.getInputSwordplayer1(s.value))}),o(14,"option",12),r(15,"Selecione ume swordplayer"),n(),h(16,Ve,2,2,"option",13),n(),o(17,"select",15,2),w("change",function(){u(m);let s=C(18);return b(i.getInputWeapon1(s.value))}),o(19,"option",12),r(20,"Selecione uma classe"),n(),h(21,Te,3,4,"option",13),n(),_(22),o(23,"label",16),r(24,"Rounds ganhos 1"),n(),o(25,"input",17),M("ngModelChange",function(s){return u(m),k(i.roundsScored1,s)||(i.roundsScored1=s),b(s)}),n(),y(),n(),o(26,"div",18)(27,"h3"),r(28,"Swordplayer 2"),n(),o(29,"select",19,3),w("change",function(){u(m);let s=C(30);return b(i.getInputClan2(s.value))}),o(31,"option",12),r(32,"Selecione o cl\xE3"),n(),h(33,Oe,4,7,"option",13),n(),o(34,"select",20,4),w("change",function(){u(m);let s=C(35);return b(i.getInputSwordplayer2(s.value))}),o(36,"option",12),r(37,"Selecione ume swordplayer"),n(),h(38,Be,2,2,"option",13),n(),o(39,"select",21,5),w("change",function(){u(m);let s=C(40);return b(i.getInputWeapon2(s.value))}),o(41,"option",12),r(42,"Selecione uma classe"),n(),h(43,je,3,4,"option",13),n(),_(44),o(45,"label",16),r(46,"Rounds ganhos 1"),n(),o(47,"input",22),M("ngModelChange",function(s){return u(m),k(i.roundsScored2,s)||(i.roundsScored2=s),b(s)}),n(),y(),n(),o(48,"div",23)(49,"button",24),w("click",function(){return u(m),b(i.toMenu())}),r(50,"Voltar"),n(),o(51,"button",25),w("click",function(){return u(m),b(i.newCombat(i.idSwp1,i.idWeapon1,i.roundsScored1,i.idSwp2,i.idWeapon2,i.roundsScored2))}),r(52,"Registrar"),n()()()()()()}t&2&&(p(11),S("ngForOf",i.clans),p(5),S("ngForOf",i.swordplayers1),p(5),S("ngForOf",i.weapons),p(4),W("ngModel",i.roundsScored1),p(8),S("ngForOf",i.clans),p(5),S("ngForOf",i.swordplayers2),p(5),S("ngForOf",i.weapons),p(4),W("ngModel",i.roundsScored2))},dependencies:[V,Q,Y,Z,H,X,q,z,te,ee,K,J,O,T],encapsulation:2})};function De(a,e){if(a&1){let t=I();_(0),o(1,"tr")(2,"td"),r(3),l(4,"uppercase"),n(),o(5,"td"),r(6),l(7,"titlecase"),n(),o(8,"td"),r(9),l(10,"titlecase"),n(),o(11,"td"),r(12),n(),o(13,"td",6)(14,"button",7),w("click",function(){let m=u(t).$implicit,c=x();return b(c.toCombatEdit(m.id))}),L(15,"i",8),n()(),o(16,"td",6)(17,"button",9),w("click",function(){let m=u(t).$implicit,c=x();return b(c.deleteCombat(m.id,m.swp1.nickname,m.swp2.nickname))}),L(18,"i",10),n()()(),o(19,"tr")(20,"td"),r(21),l(22,"uppercase"),n(),o(23,"td"),r(24),l(25,"titlecase"),n(),o(26,"td"),r(27),l(28,"titlecase"),n(),o(29,"td"),r(30),n()(),L(31,"br"),y()}if(a&2){let t=e.$implicit;p(3),v(d(4,12,t.swp1.clan.abbreviation)),p(3),v(d(7,14,t.swp1.nickname)),p(3),v(d(10,16,t.weapon1.name)),p(2),me("bg-success",t.roundsScored1-t.roundsScored2>0),p(),v(t.roundsScored1),p(9),v(d(22,18,t.swp2.clan.abbreviation)),p(3),v(d(25,20,t.swp2.nickname)),p(3),v(d(28,22,t.weapon2.name)),p(2),me("bg-success",t.roundsScored2-t.roundsScored1>0),p(),v(t.roundsScored2)}}var re=class a{constructor(e,t,i,m){this.combatServ=e;this.routeService=t;this.authService=i;this.errorService=m}subscriptions=new D;combats=[];ngOnInit(){this.refreshData()}ngOnDestroy(){this.subscriptions.unsubscribe()}getCombats(){this.subscriptions.add=this.combatServ.getAllCombats().subscribe({next:e=>{this.combats=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}deleteCombat(e,t,i){window.confirm(`Remover combate entre ${t} e ${i}?`)&&(this.subscriptions.add=this.combatServ.deleteCombat(e).subscribe({complete:()=>{window.alert("Combate removido")},error:c=>{this.errorService.handler(c)}}))}toCombatEdit(e){this.routeService.navigate.toCombatEdit(e)}refreshData(){this.getCombats()}static \u0275fac=function(t){return new(t||a)(f(R),f(B),f(j),f(F))};static \u0275cmp=E({type:a,selectors:[["app-combat-list"]],standalone:!1,decls:18,vars:1,consts:[[1,"d-flex","justify-content-around","my-3"],[3,"refreshData"],[1,"table","table-striped","table-bordered","text-center","table-sm"],["colspan","1",1,"fs-4"],["colspan","2",1,"fs-4"],[4,"ngFor","ngForOf"],["rowspan","2",1,"align-middle"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(t,i){t&1&&(o(0,"div",0),L(1,"app-button-back-to-menu"),o(2,"app-button-refresh-data",1),w("refreshData",function(){return i.refreshData()}),n()(),o(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),r(7,"Cl\xE3"),n(),o(8,"th",3),r(9,"Swp"),n(),o(10,"th",3),r(11,"Classe"),n(),o(12,"th",3),r(13,"Rounds"),n(),o(14,"th",4),r(15,"A\xE7\xF5es"),n()()(),o(16,"tbody"),h(17,De,32,24,"ng-container",5),n()()),t&2&&(p(17),S("ngForOf",i.combats))},dependencies:[V,ge,Se,O,T],encapsulation:2})};function Fe(a,e){if(a&1&&(o(0,"option",25),r(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit,i=x();g("value",t.id),S("selected",t.id==i.combat.weapon1.id),p(),v(d(2,3,t.name))}}function Re(a,e){if(a&1&&(o(0,"option",25),r(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit,i=x();g("value",t.id),S("selected",t.id==i.combat.weapon2.id),p(),v(d(2,3,t.name))}}var ae=class a{constructor(e,t,i,m,c,s){this.weaponService=e;this.routeService=t;this.combatService=i;this.route=m;this.authService=c;this.errorService=s}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.idCombat=this.route.snapshot.params.id,this.getCombatById(this.idCombat),this.getWeapons()}subscriptions=new D;idCombat;combat;weapons=[];weapons1=[];weapons2=[];getCombatById(e){this.subscriptions.add=this.combatService.getCombatById(e).subscribe({next:t=>{this.combat=t.data,t.token&&this.authService.updateToken(t.token)},error:t=>{this.errorService.handler(t)}})}getInputWeapon1(e){this.combat.weapon1.id=Number(e)}getInputWeapon2(e){this.combat.weapon2.id=Number(e)}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:e=>{this.weapons=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}updateCombat(){if(!this.combat)return window.alert("N\xE3o foi identificado combate");if(!this.combat.swp1||!this.combat.swp1)return window.alert("N\xE3o h\xE1 swordplayers registrados no combate");if(!this.combat.weapon1.id||!this.combat.weapon2.id)return window.alert("N\xE3o h\xE1 armas selecionadas");if(this.combat.roundsScored1<0||this.combat.roundsScored2<0)return window.alert("Rounds n\xE3o podem ser negativos");if(this.combat.roundsScored1<2&&this.combat.roundsScored2<2)return window.alert("Ningu\xE9m atingiu 2 rounds ganhos");if(this.combat.roundsScored1+this.combat.roundsScored2>3)return window.alert("N\xE3o devem ser registrados mais de 3 rounds");this.subscriptions.add=this.combatService.updateCombat(this.idCombat,this.combat.weapon1.id,this.combat.weapon2.id,this.combat.roundsScored1,this.combat.roundsScored2).subscribe({complete:()=>this.toCombatsList(),error:e=>{this.errorService.handler(e)}})}toCombatsList(){this.routeService.navigate.toCombatList()}static \u0275fac=function(t){return new(t||a)(f(A),f(B),f(R),f(fe),f(j),f(F))};static \u0275cmp=E({type:a,selectors:[["app-combat-edit"]],standalone:!1,decls:51,vars:22,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"selected","value"]],template:function(t,i){if(t&1){let m=I();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),r(6,"Swordplayer 1"),n(),o(7,"select",11,0)(9,"option"),r(10),l(11,"titlecase"),l(12,"uppercase"),n()(),o(13,"select",12,1)(15,"option"),r(16),l(17,"titlecase"),n()(),o(18,"select",13,2),w("change",function(){u(m);let s=C(19);return b(i.getInputWeapon1(s.value))}),h(20,Fe,3,5,"option",14),n(),_(21),o(22,"label",15),r(23,"Rounds ganhos 1"),n(),o(24,"input",16),M("ngModelChange",function(s){return u(m),k(i.combat.roundsScored1,s)||(i.combat.roundsScored1=s),b(s)}),n(),y(),n(),o(25,"div",17)(26,"h3"),r(27,"Swordplayer 2"),n(),o(28,"select",18,3)(30,"option"),r(31),l(32,"titlecase"),l(33,"uppercase"),n()(),o(34,"select",19,4)(36,"option"),r(37),l(38,"titlecase"),n()(),o(39,"select",20,5),w("change",function(){u(m);let s=C(40);return b(i.getInputWeapon2(s.value))}),h(41,Re,3,5,"option",14),n(),_(42),o(43,"label",15),r(44,"Rounds ganhos 1"),n(),o(45,"input",21),M("ngModelChange",function(s){return u(m),k(i.combat.roundsScored2,s)||(i.combat.roundsScored2=s),b(s)}),n(),y(),n(),o(46,"div",22)(47,"button",23),w("click",function(){return u(m),b(i.toCombatsList())}),r(48,"Voltar"),n(),o(49,"button",24),w("click",function(){return u(m),b(i.updateCombat())}),r(50,"Atualizar"),n()()()()()()}t&2&&(p(10),N("",d(11,10,i.combat.swp1.clan.full_name)," | ",d(12,12,i.combat.swp1.clan.abbreviation),""),p(6),v(d(17,14,i.combat.swp1.nickname)),p(4),S("ngForOf",i.weapons),p(4),W("ngModel",i.combat.roundsScored1),p(7),N("",d(32,16,i.combat.swp2.clan.full_name)," | ",d(33,18,i.combat.swp1.clan.abbreviation),""),p(6),v(d(38,20,i.combat.swp2.nickname)),p(4),S("ngForOf",i.weapons),p(4),W("ngModel",i.combat.roundsScored2))},dependencies:[V,Q,Y,Z,H,X,q,z,te,ee,K,J,O,T],encapsulation:2})};var Ae=[{path:"new",component:oe,canActivate:[ie,ne]},{path:"list",component:re,canActivate:[ie,ne]},{path:"edit/:id",component:ae,canActivate:[ie,ne]}],se=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=G({type:a});static \u0275inj=$({imports:[ce.forChild(Ae),ce]})};var We=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=G({type:a});static \u0275inj=$({imports:[ue,se]})};export{We as CombatModule};
