import{a as ke}from"./chunk-UT5AW7I7.js";import{a as A}from"./chunk-VXBHMYSM.js";import{a as X,b as z}from"./chunk-27U7VL6F.js";import{a as We}from"./chunk-JXR62XQQ.js";import{A as g,Aa as Y,B as o,Ba as Ve,C as f,E as x,F as N,G as M,H as k,J as l,K as d,L as de,M as _e,O as T,P as ye,R as F,S as O,T as Ee,X as Ie,ba as xe,d as Ce,e as K,f as ce,fa as ue,ga as Ne,h as u,ha as B,i as b,ia as R,j as p,ja as j,k as w,ka as D,l as V,la as L,m as Q,ma as P,na as Z,o as h,oa as ee,p as S,pa as U,q as le,qa as te,r,ra as ie,s as n,t as W,ta as q,u as _,ua as $,v as y,va as ne,w as I,wa as re,x as v,y as E,z as C,za as Me}from"./chunk-N2ZG4KML.js";var G=class a{constructor(e,t){this.http=e;this.constService=t;this.BASE_URL=t.FULL_URL+"/weapon"}BASE_URL;getAllWeapons(){let e=this.BASE_URL;return this.http.get(e)}static \u0275fac=function(t){return new(t||a)(ce(Ie),ce(Ne))};static \u0275prov=Ce({token:a,factory:a.\u0275fac,providedIn:"root"})};function Re(a,e){if(a&1&&(r(0,"option",26),o(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),x("",d(2,3,t.full_name)," | ",d(3,5,t.abbreviation),"")}}function je(a,e){if(a&1&&(r(0,"option",26),o(1),n()),a&2){let t=e.$implicit;C("value",t.id),p(),f(t.nickname)}}function De(a,e){if(a&1&&(r(0,"option",26),o(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),f(d(2,2,t.name))}}function Ae(a,e){if(a&1&&(r(0,"option",26),o(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),x("",d(2,3,t.full_name)," | ",d(3,5,t.abbreviation),"")}}function Le(a,e){if(a&1&&(r(0,"option",26),o(1),n()),a&2){let t=e.$implicit;C("value",t.id),p(),f(t.nickname)}}function Pe(a,e){if(a&1&&(r(0,"option",26),o(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),f(d(2,2,t.name))}}var oe=class a{constructor(e,t,i,s,c,m,ge){this.clanService=e;this.swpService=t;this.weaponService=i;this.routeService=s;this.combatService=c;this.authService=m;this.errorService=ge}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.getClansWithEnabledPlayer()}subscriptions=new j;clans=[];idClan1="";idClan2="";swordplayers1=[];idSwp1=0;swordplayers2=[];idSwp2=0;weapons=[];weapons1=[];weapons2=[];idWeapon1=0;idWeapon2=0;roundsScored1=0;roundsScored2=0;getClansWithEnabledPlayer(){this.clanService.getClansWithEnabledPlayers().subscribe({next:e=>{this.clans=e.data,e.token&&this.authService.updateToken(e.token)},complete:()=>{this.getWeapons()},error:e=>{this.errorService.handler(e)}})}getEnabledSwordplayersByClan(e,t){this.subscriptions.add=this.swpService.getEnabledPlayersByClan(e).subscribe({next:i=>{i.token&&this.authService.updateToken(i.token);let s=this.swpService.sortSwordplayers(i.data);t==1&&(e==this.idClan2&&(this.swordplayers2=this.swordplayers2),this.swordplayers1=s),t==2&&(e==this.idClan1&&(this.swordplayers1=this.swordplayers1),this.swordplayers2=s)},error:i=>{this.errorService.handler(i)}})}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:e=>{this.weapons=e.data,e.token&&this.authService.updateToken(e.token)},complete:()=>{this.refreshWeaponsList(1),this.refreshWeaponsList(2)},error:e=>{this.errorService.handler(e)}})}refreshWeaponsList(e){e==1&&(this.weapons1=[],this.weapons1=this.weapons),e==2&&(this.weapons2=[],this.weapons2=this.weapons)}getInputClan1(e){this.idClan1=e,this.swordplayers1=[],this.getInputSwordplayer1("0"),this.getEnabledSwordplayersByClan(this.idClan1,1)}getInputClan2(e){this.idClan2=e,this.swordplayers2=[],this.getInputSwordplayer2("0"),this.getEnabledSwordplayersByClan(this.idClan2,2)}getInputSwordplayer1(e){this.idSwp1=Number(e),this.refreshWeaponsList(1)}getInputSwordplayer2(e){this.idSwp2=Number(e),this.refreshWeaponsList(2)}getInputWeapon1(e){this.idWeapon1=Number(e),this.roundsScored1=0}getInputWeapon2(e){this.idWeapon2=Number(e),this.roundsScored2=0}toMenu(){this.routeService.navigate.toMenu()}resetForm(){this.roundsScored1=0,this.roundsScored2=0}newCombat(e,t,i,s,c,m){if(!e||!s||!t||!c||!i&&!m)return window.alert("Preencha todos os campos");if(e==s)return window.alert("Selecione swordplayers diferentes");if(i<0||m<0)return window.alert("Rounds n\xE3o podem ser negativos");if(i<2&&m<2)return window.alert("Ningu\xE9m atingiu 2 rounds ganhos");if(i+m>3)return window.alert("N\xE3o devem ser registrados mais de 3 rounds");let ge=this.authService.getUserId();this.subscriptions.add=this.combatService.newcombat(e,t,i,s,c,m,ge).subscribe({next:J=>{J.token&&this.authService.updateToken(J.token)},complete:()=>{window.alert("Combate registrado com sucesso"),this.resetForm()},error:J=>{this.errorService.handler(J)}})}static \u0275fac=function(t){return new(t||a)(w(Ve),w(X),w(G),w(B),w(A),w(R),w(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-new"]],standalone:!1,decls:53,vars:8,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"value"]],template:function(t,i){if(t&1){let s=I();r(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),o(6,"Swordplayer 1"),n(),r(7,"select",11,0),v("change",function(){u(s);let m=g(8);return b(i.getInputClan1(m.value))}),r(9,"option",12),o(10,"Selecione o cl\xE3"),n(),h(11,Re,4,7,"option",13),n(),r(12,"select",14,1),v("change",function(){u(s);let m=g(13);return b(i.getInputSwordplayer1(m.value))}),r(14,"option",12),o(15,"Selecione ume swordplayer"),n(),h(16,je,2,2,"option",13),n(),r(17,"select",15,2),v("change",function(){u(s);let m=g(18);return b(i.getInputWeapon1(m.value))}),r(19,"option",12),o(20,"Selecione uma classe"),n(),h(21,De,3,4,"option",13),n(),_(22),r(23,"label",16),o(24,"Rounds ganhos 1"),n(),r(25,"input",17),k("ngModelChange",function(m){return u(s),M(i.roundsScored1,m)||(i.roundsScored1=m),b(m)}),n(),y(),n(),r(26,"div",18)(27,"h3"),o(28,"Swordplayer 2"),n(),r(29,"select",19,3),v("change",function(){u(s);let m=g(30);return b(i.getInputClan2(m.value))}),r(31,"option",12),o(32,"Selecione o cl\xE3"),n(),h(33,Ae,4,7,"option",13),n(),r(34,"select",20,4),v("change",function(){u(s);let m=g(35);return b(i.getInputSwordplayer2(m.value))}),r(36,"option",12),o(37,"Selecione ume swordplayer"),n(),h(38,Le,2,2,"option",13),n(),r(39,"select",21,5),v("change",function(){u(s);let m=g(40);return b(i.getInputWeapon2(m.value))}),r(41,"option",12),o(42,"Selecione uma classe"),n(),h(43,Pe,3,4,"option",13),n(),_(44),r(45,"label",16),o(46,"Rounds ganhos 1"),n(),r(47,"input",22),k("ngModelChange",function(m){return u(s),M(i.roundsScored2,m)||(i.roundsScored2=m),b(m)}),n(),y(),n(),r(48,"div",23)(49,"button",24),v("click",function(){return u(s),b(i.toMenu())}),o(50,"Voltar"),n(),r(51,"button",25),v("click",function(){return u(s),b(i.newCombat(i.idSwp1,i.idWeapon1,i.roundsScored1,i.idSwp2,i.idWeapon2,i.roundsScored2))}),o(52,"Registrar"),n()()()()()()}t&2&&(p(11),S("ngForOf",i.clans),p(5),S("ngForOf",i.swordplayers1),p(5),S("ngForOf",i.weapons),p(4),N("ngModel",i.roundsScored1),p(8),S("ngForOf",i.clans),p(5),S("ngForOf",i.swordplayers2),p(5),S("ngForOf",i.weapons),p(4),N("ngModel",i.roundsScored2))},dependencies:[T,te,q,$,L,ie,P,Z,re,ne,U,ee,O,F],encapsulation:2})};function Ue(a,e){if(a&1){let t=I();_(0),r(1,"tr")(2,"td"),o(3),l(4,"uppercase"),n(),r(5,"td"),o(6),l(7,"titlecase"),n(),r(8,"td"),o(9),l(10,"titlecase"),n(),r(11,"td"),o(12),n(),r(13,"td",6)(14,"button",7),v("click",function(){let s=u(t).$implicit,c=E();return b(c.toCombatEdit(s.id))}),W(15,"i",8),n()(),r(16,"td",6)(17,"button",9),v("click",function(){let s=u(t).$implicit,c=E();return b(c.deleteCombat(s.id,s.swp1.nickname,s.swp2.nickname))}),W(18,"i",10),n()()(),r(19,"tr")(20,"td"),o(21),l(22,"uppercase"),n(),r(23,"td"),o(24),l(25,"titlecase"),n(),r(26,"td"),o(27),l(28,"titlecase"),n(),r(29,"td"),o(30),n()(),W(31,"br"),y()}if(a&2){let t=e.$implicit;p(3),f(d(4,12,t.swp1.clan.abbreviation)),p(3),f(d(7,14,t.swp1.nickname)),p(3),f(d(10,16,t.weapon1.name)),p(2),le("bg-success",t.roundsScored1-t.roundsScored2>0),p(),f(t.roundsScored1),p(9),f(d(22,18,t.swp2.clan.abbreviation)),p(3),f(d(25,20,t.swp2.nickname)),p(3),f(d(28,22,t.weapon2.name)),p(2),le("bg-success",t.roundsScored2-t.roundsScored1>0),p(),f(t.roundsScored2)}}var ae=class a{constructor(e,t,i,s){this.combatServ=e;this.routeService=t;this.authService=i;this.errorService=s}subscriptions=new j;combats=[];ngOnInit(){this.refreshData()}ngOnDestroy(){this.subscriptions.unsubscribe()}getCombats(){this.subscriptions.add=this.combatServ.getAllCombats().subscribe({next:e=>{this.combats=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}deleteCombat(e,t,i){window.confirm(`Remover combate entre ${t} e ${i}?`)&&(this.subscriptions.add=this.combatServ.deleteCombat(e).subscribe({complete:()=>{window.alert("Combate removido")},error:c=>{this.errorService.handler(c)}}))}toCombatEdit(e){this.routeService.navigate.toCombatEdit(e)}refreshData(){this.getCombats()}static \u0275fac=function(t){return new(t||a)(w(A),w(B),w(R),w(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-list"]],standalone:!1,decls:18,vars:1,consts:[[1,"d-flex","justify-content-around","my-3"],[3,"refreshData"],[1,"table","table-striped","table-bordered","text-center","table-sm"],["colspan","1",1,"fs-4"],["colspan","2",1,"fs-4"],[4,"ngFor","ngForOf"],["rowspan","2",1,"align-middle"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(t,i){t&1&&(r(0,"div",0),W(1,"app-button-back-to-menu"),r(2,"app-button-refresh-data",1),v("refreshData",function(){return i.refreshData()}),n()(),r(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),o(7,"Cl\xE3"),n(),r(8,"th",3),o(9,"Swp"),n(),r(10,"th",3),o(11,"Classe"),n(),r(12,"th",3),o(13,"Rounds"),n(),r(14,"th",4),o(15,"A\xE7\xF5es"),n()()(),r(16,"tbody"),h(17,Ue,32,24,"ng-container",5),n()()),t&2&&(p(17),S("ngForOf",i.combats))},dependencies:[T,We,Me,O,F],encapsulation:2})};function qe(a,e){if(a&1&&(r(0,"option",25),o(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit,i=E();C("value",t.id),S("selected",t.id==i.combat.weapon1.id),p(),f(d(2,3,t.name))}}function $e(a,e){if(a&1&&(r(0,"option",25),o(1),l(2,"titlecase"),n()),a&2){let t=e.$implicit,i=E();C("value",t.id),S("selected",t.id==i.combat.weapon2.id),p(),f(d(2,3,t.name))}}var se=class a{constructor(e,t,i,s,c,m){this.weaponService=e;this.routeService=t;this.combatService=i;this.route=s;this.authService=c;this.errorService=m}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.idCombat=this.route.snapshot.params.id,this.getCombatById(this.idCombat),this.getWeapons()}subscriptions=new j;idCombat;combat;weapons=[];weapons1=[];weapons2=[];getCombatById(e){this.subscriptions.add=this.combatService.getCombatById(e).subscribe({next:t=>{this.combat=t.data,t.token&&this.authService.updateToken(t.token)},error:t=>{this.errorService.handler(t)}})}getInputWeapon1(e){this.combat.weapon1.id=Number(e)}getInputWeapon2(e){this.combat.weapon2.id=Number(e)}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:e=>{this.weapons=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}updateCombat(){if(!this.combat)return window.alert("N\xE3o foi identificado combate");if(!this.combat.swp1||!this.combat.swp1)return window.alert("N\xE3o h\xE1 swordplayers registrados no combate");if(!this.combat.weapon1.id||!this.combat.weapon2.id)return window.alert("N\xE3o h\xE1 armas selecionadas");if(this.combat.roundsScored1<0||this.combat.roundsScored2<0)return window.alert("Rounds n\xE3o podem ser negativos");if(this.combat.roundsScored1<2&&this.combat.roundsScored2<2)return window.alert("Ningu\xE9m atingiu 2 rounds ganhos");if(this.combat.roundsScored1+this.combat.roundsScored2>3)return window.alert("N\xE3o devem ser registrados mais de 3 rounds");this.subscriptions.add=this.combatService.updateCombat(this.idCombat,this.combat.weapon1.id,this.combat.weapon2.id,this.combat.roundsScored1,this.combat.roundsScored2).subscribe({complete:()=>this.toCombatsList(),error:e=>{this.errorService.handler(e)}})}toCombatsList(){this.routeService.navigate.toCombatSearch()}static \u0275fac=function(t){return new(t||a)(w(G),w(B),w(A),w(xe),w(R),w(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-edit"]],standalone:!1,decls:51,vars:22,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"selected","value"]],template:function(t,i){if(t&1){let s=I();r(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),o(6,"Swordplayer 1"),n(),r(7,"select",11,0)(9,"option"),o(10),l(11,"titlecase"),l(12,"uppercase"),n()(),r(13,"select",12,1)(15,"option"),o(16),l(17,"titlecase"),n()(),r(18,"select",13,2),v("change",function(){u(s);let m=g(19);return b(i.getInputWeapon1(m.value))}),h(20,qe,3,5,"option",14),n(),_(21),r(22,"label",15),o(23,"Rounds ganhos 1"),n(),r(24,"input",16),k("ngModelChange",function(m){return u(s),M(i.combat.roundsScored1,m)||(i.combat.roundsScored1=m),b(m)}),n(),y(),n(),r(25,"div",17)(26,"h3"),o(27,"Swordplayer 2"),n(),r(28,"select",18,3)(30,"option"),o(31),l(32,"titlecase"),l(33,"uppercase"),n()(),r(34,"select",19,4)(36,"option"),o(37),l(38,"titlecase"),n()(),r(39,"select",20,5),v("change",function(){u(s);let m=g(40);return b(i.getInputWeapon2(m.value))}),h(41,$e,3,5,"option",14),n(),_(42),r(43,"label",15),o(44,"Rounds ganhos 1"),n(),r(45,"input",21),k("ngModelChange",function(m){return u(s),M(i.combat.roundsScored2,m)||(i.combat.roundsScored2=m),b(m)}),n(),y(),n(),r(46,"div",22)(47,"button",23),v("click",function(){return u(s),b(i.toCombatsList())}),o(48,"Voltar"),n(),r(49,"button",24),v("click",function(){return u(s),b(i.updateCombat())}),o(50,"Atualizar"),n()()()()()()}t&2&&(p(10),x("",d(11,10,i.combat.swp1.clan.full_name)," | ",d(12,12,i.combat.swp1.clan.abbreviation),""),p(6),f(d(17,14,i.combat.swp1.nickname)),p(4),S("ngForOf",i.weapons),p(4),N("ngModel",i.combat.roundsScored1),p(7),x("",d(32,16,i.combat.swp2.clan.full_name)," | ",d(33,18,i.combat.swp1.clan.abbreviation),""),p(6),f(d(38,20,i.combat.swp2.nickname)),p(4),S("ngForOf",i.weapons),p(4),N("ngModel",i.combat.roundsScored2))},dependencies:[T,te,q,$,L,ie,P,Z,re,ne,U,ee,O,F],encapsulation:2})};function Ge(a,e){if(a&1&&(r(0,"option",19),o(1),l(2,"uppercase"),l(3,"titlecase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),x("",d(2,3,t.clan.abbreviation)," | ",d(3,5,t.nickname),"")}}function He(a,e){if(a&1&&(r(0,"option",19),o(1),l(2,"uppercase"),l(3,"titlecase"),n()),a&2){let t=e.$implicit;C("value",t.id),p(),x("",d(2,3,t.clan.abbreviation)," | ",d(3,5,t.nickname),"")}}function Ye(a,e){if(a&1){let t=I();_(0),r(1,"div")(2,"table",21)(3,"thead")(4,"tr")(5,"th"),o(6,"Cl\xE3s"),n(),r(7,"th"),o(8,"Swordplayers"),n(),r(9,"th"),o(10,"Armas"),n(),r(11,"th"),o(12,"Rounds"),n(),r(13,"th",22),o(14,"A\xE7\xF5es"),n()()(),r(15,"tbody")(16,"tr")(17,"td"),o(18),l(19,"uppercase"),n(),r(20,"td"),o(21),l(22,"titlecase"),n(),r(23,"td"),o(24),l(25,"titlecase"),n(),r(26,"td"),o(27),n(),r(28,"td",23)(29,"button",16),v("click",function(){u(t);let s=E(2);return b(s.toCombatEdit(s.combat.id))}),W(30,"i",24),n()(),r(31,"td",23)(32,"button",25),v("click",function(){u(t);let s=E(2);return b(s.deleteCombat(s.combat.id,s.combat.swp1.nickname,s.combat.swp2.nickname))}),W(33,"i",26),n()()(),r(34,"tr")(35,"td"),o(36),l(37,"uppercase"),n(),r(38,"td"),o(39),l(40,"titlecase"),n(),r(41,"td"),o(42),l(43,"titlecase"),n(),r(44,"td"),o(45),n()()()()(),y()}if(a&2){let t=E(2);p(18),f(d(19,8,t.combat.swp1.clan.abbreviation)),p(3),f(d(22,10,t.combat.swp1.nickname)),p(3),f(d(25,12,t.combat.weapon1.name)),p(3),f(t.combat.roundsScored1),p(9),f(d(37,14,t.combat.swp2.clan.abbreviation)),p(3),f(d(40,16,t.combat.swp2.nickname)),p(3),f(d(43,18,t.combat.weapon2.name)),p(3),f(t.combat.roundsScored2)}}function ze(a,e){if(a&1&&(_(0),h(1,Ye,46,20,"ng-container",20),y()),a&2){let t=E(),i=g(31);p(),S("ngIf",t.combat)("ngIfElse",i)}}function Je(a,e){a&1&&(r(0,"div",27)(1,"div",5)(2,"div",6)(3,"div",28)(4,"h1",29),o(5,"Combate n\xE3o encontrado"),n()()()()())}var pe=class a{constructor(e,t,i,s,c){this.routeService=e;this.combatService=t;this.swpService=i;this.authService=s;this.errorService=c}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.getSwordplayers()}subscriptions=new j;combatRequested=!1;swordplayers=[];swpMap={};combat;swpFilter1="";swpFilter2="";swpId1=0;swpId2=0;getSwordplayers(){this.subscriptions.add=this.swpService.getAllSwordplayers().subscribe({next:e=>this.swordplayers=e.data,complete:()=>this.swpMap=this.swpService.mapSwordplayers(this.swordplayers),error:e=>{this.errorService.handler(e)}})}getSwp1(e){this.swpId1=Number(e)}getSwp2(e){this.swpId2=Number(e)}searchCombat(e,t){if(!e||!t)return window.alert("Por favor, selecione os dois swordplayers");if(e==t)return window.alert("Escolha swordplayers diferentes");this.subscriptions.add=this.combatService.getCombatByBothSwordplayers(e,t).subscribe({next:i=>{i.token&&this.authService.updateToken(i.token),this.combat=i.data},complete:()=>{if(e==this.combat.swp1.id){let i=this.swpMap[e];this.combat.swp1=this.swordplayers[i];let s=this.swpMap[t];this.combat.swp2=this.swordplayers[s]}else{let i=this.swpMap[t];this.combat.swp1=this.swordplayers[i];let s=this.swpMap[e];this.combat.swp2=this.swordplayers[s]}},error:i=>{this.errorService.handler(i)}}),this.combatRequested=!0}deleteCombat(e,t,i){window.confirm(`Remover combate entre ${t} e ${i}?`)&&(this.subscriptions.add=this.combatService.deleteCombat(e).subscribe({complete:()=>{window.alert("Combate removido")},error:c=>{if(c.status==404)return window.alert("Combate n\xE3o encontrado");this.errorService.handler(c)}}))}toCombatEdit(e){this.routeService.navigate.toCombatEdit(e)}clearFilter(){this.swpFilter1="",this.swpFilter2=""}static \u0275fac=function(t){return new(t||a)(w(B),w(A),w(X),w(R),w(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-search"]],standalone:!1,decls:32,vars:11,consts:[["swpInput1",""],["swpInput2",""],["combatNotFound",""],[1,"mb-3","text-center"],[1,"container","border","rounded","m-2","bg-dark","bg-opacity-75"],[1,"row"],[1,"col"],[1,"d-flex","flex-column","justify-content-center","align-itens-center"],["type","text","placeholder","Filtrar cl\xE3 ou swordplayer 1",1,"text-center","form-control","m-1",3,"ngModelChange","ngModel"],["name","swp1","id","swp1",1,"form-select","m-1",3,"change"],["selected","","value","0"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Filtrar cl\xE3 ou swordplayer 2",1,"text-center","form-control","m-1",3,"ngModelChange","ngModel"],["name","swp2","id","swp2",1,"form-select","m-1",3,"change"],[1,"d-flex","justify-content-around","m-3"],[1,"btn","btn-outline-warning",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"table","table-bordered","text-center"],["colspan","2"],["rowspan","2",1,"align-middle"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"container","m-2"],[1,"border","rounded","text-center","bg-warning","bg-opacity-75"],[1,"text-dark"]],template:function(t,i){if(t&1){let s=I();r(0,"h1",3),o(1,"Procurar combate"),n(),r(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"input",8),k("ngModelChange",function(m){return u(s),M(i.swpFilter1,m)||(i.swpFilter1=m),b(m)}),n(),r(7,"select",9,0),v("change",function(){u(s);let m=g(8);return b(i.getSwp1(m.value))}),r(9,"option",10),o(10,"SELECIONE UME SWORDPLAYER"),n(),h(11,Ge,4,7,"option",11),l(12,"findSwordplayer"),n()()(),r(13,"div",6)(14,"div",7)(15,"input",12),k("ngModelChange",function(m){return u(s),M(i.swpFilter2,m)||(i.swpFilter2=m),b(m)}),n(),r(16,"select",13,1),v("change",function(){u(s);let m=g(17);return b(i.getSwp2(m.value))}),r(18,"option",10),o(19,"SELECIONE UME SWORDPLAYER"),n(),h(20,He,4,7,"option",11),l(21,"findSwordplayer"),n()()()(),r(22,"div",5)(23,"div",14)(24,"button",15),v("click",function(){return u(s),b(i.clearFilter())}),o(25,"Limpar filtros"),n(),r(26,"button",16),v("click",function(){return u(s),b(i.searchCombat(i.swpId1,i.swpId2))}),o(27,"Pesquisar"),n()()()(),r(28,"div",17),h(29,ze,2,2,"ng-container",18)(30,Je,6,0,"ng-template",null,2,_e),n()}t&2&&(p(6),N("ngModel",i.swpFilter1),p(5),S("ngForOf",de(12,5,i.swordplayers,i.swpFilter1)),p(4),N("ngModel",i.swpFilter2),p(5),S("ngForOf",de(21,8,i.swordplayers,i.swpFilter2)),p(9),S("ngIf",i.combatRequested))},dependencies:[T,ye,q,$,L,P,U,O,F,ke],encapsulation:2})};var Ke=[{path:"new",component:oe,canActivate:[Y,z]},{path:"list",component:ae,canActivate:[Y,z]},{path:"search",component:pe,canActivate:[Y,z]},{path:"edit/:id",component:se,canActivate:[Y,z]}],me=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Q({type:a});static \u0275inj=K({imports:[ue.forChild(Ke),ue]})};var Oe=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=Q({type:a});static \u0275inj=K({imports:[Ee,me]})};export{Oe as CombatModule};
