import{a as ke}from"./chunk-YOTXYOYX.js";import{a as A}from"./chunk-DSQDUM5C.js";import{a as X,b as z}from"./chunk-RM4CYHGZ.js";import{a as Ve}from"./chunk-NDBIMH2G.js";import{A as g,Aa as Me,B as r,Ba as Y,C as f,Ca as Ne,E as x,G as M,H as k,I as N,K as l,L as d,M as de,N as Ce,P as F,Q as _e,S as T,T as O,U as ye,Y as Ee,ca as Ie,d as ge,e as K,f as ce,ga as ue,h as u,ha as xe,i as b,ia as B,j as p,ja as R,k as v,ka as j,l as V,la as D,m as Q,ma as L,na as P,o as h,oa as Z,p as w,pa as ee,q as le,qa as U,r as o,ra as te,s as n,sa as ie,t as W,u as _,ua as q,v as y,va as $,w as I,wa as ne,x as S,xa as oe,y as E,z as C}from"./chunk-6JEIGHQT.js";var G=class a{constructor(t,e){this.http=t;this.constService=e;this.BASE_URL=e.FULL_URL+"/weapon"}BASE_URL;getAllWeapons(){let t=this.BASE_URL;return this.http.get(t)}static \u0275fac=function(e){return new(e||a)(ce(Ee),ce(xe))};static \u0275prov=ge({token:a,factory:a.\u0275fac,providedIn:"root"})};function je(a,t){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),x("",d(2,3,e.full_name)," | ",d(3,5,e.abbreviation),"")}}function De(a,t){if(a&1&&(o(0,"option",26),r(1),n()),a&2){let e=t.$implicit;C("value",e.id),p(),f(e.nickname)}}function Ae(a,t){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),f(d(2,2,e.name))}}function Le(a,t){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),l(3,"uppercase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),x("",d(2,3,e.full_name)," | ",d(3,5,e.abbreviation),"")}}function Pe(a,t){if(a&1&&(o(0,"option",26),r(1),n()),a&2){let e=t.$implicit;C("value",e.id),p(),f(e.nickname)}}function Ue(a,t){if(a&1&&(o(0,"option",26),r(1),l(2,"titlecase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),f(d(2,2,e.name))}}var re=class a{constructor(t,e,i,s,c,m,Oe){this.clanService=t;this.swpService=e;this.weaponService=i;this.routeService=s;this.combatService=c;this.authService=m;this.errorService=Oe}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.getClansWithEnabledPlayer()}subscriptions=new j;clans=[];idClan1="";idClan2="";swordplayers1=[];idSwp1=0;swordplayers2=[];idSwp2=0;weapons=[];weapons1=[];weapons2=[];idWeapon1=0;idWeapon2=0;roundsScored1=0;roundsScored2=0;getClansWithEnabledPlayer(){this.clanService.getClansWithEnabledPlayers().subscribe({next:t=>{this.clans=t.data,t.token&&this.authService.updateToken(t.token)},complete:()=>{this.getWeapons()},error:t=>{this.errorService.handler(t)}})}getEnabledSwordplayersByClan(t,e){this.subscriptions.add=this.swpService.getEnabledPlayersByClan(t).subscribe({next:i=>{i.token&&this.authService.updateToken(i.token);let s=this.swpService.sortSwordplayers(i.data);e==1&&(t==this.idClan2&&(this.swordplayers2=this.swordplayers2),this.swordplayers1=s),e==2&&(t==this.idClan1&&(this.swordplayers1=this.swordplayers1),this.swordplayers2=s)},error:i=>{this.errorService.handler(i)}})}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:t=>{this.weapons=t.data,t.token&&this.authService.updateToken(t.token)},complete:()=>{this.refreshWeaponsList(1),this.refreshWeaponsList(2)},error:t=>{this.errorService.handler(t)}})}refreshWeaponsList(t){t==1&&(this.weapons1=[],this.weapons1=this.weapons),t==2&&(this.weapons2=[],this.weapons2=this.weapons)}getInputClan1(t){this.idClan1=t,this.swordplayers1=[],this.getInputSwordplayer1("0"),this.getEnabledSwordplayersByClan(this.idClan1,1)}getInputClan2(t){this.idClan2=t,this.swordplayers2=[],this.getInputSwordplayer2("0"),this.getEnabledSwordplayersByClan(this.idClan2,2)}getInputSwordplayer1(t){this.idSwp1=Number(t),this.refreshWeaponsList(1)}getInputSwordplayer2(t){this.idSwp2=Number(t),this.refreshWeaponsList(2)}getInputWeapon1(t){this.idWeapon1=Number(t),this.roundsScored1=0}getInputWeapon2(t){this.idWeapon2=Number(t),this.roundsScored2=0}toMenu(){this.routeService.navigate.toMenu()}resetForm(){this.roundsScored1=0,this.roundsScored2=0}newCombat(t,e,i,s,c,m){if(!this.combatService.validateCombat(t,e,i,s,c,m))return;let Be=this.authService.getUserId();this.subscriptions.add=this.combatService.newcombat(t,e,i,s,c,m,Be).subscribe({next:J=>{J.token&&this.authService.updateToken(J.token)},complete:()=>{window.alert("Combate registrado com sucesso"),this.resetForm()},error:J=>{this.errorService.handler(J)}})}static \u0275fac=function(e){return new(e||a)(v(Ne),v(X),v(G),v(B),v(A),v(R),v(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-new"]],standalone:!1,decls:53,vars:8,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"value"]],template:function(e,i){if(e&1){let s=I();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),r(6,"Swordplayer 1"),n(),o(7,"select",11,0),S("change",function(){u(s);let m=g(8);return b(i.getInputClan1(m.value))}),o(9,"option",12),r(10,"Selecione o cl\xE3"),n(),h(11,je,4,7,"option",13),n(),o(12,"select",14,1),S("change",function(){u(s);let m=g(13);return b(i.getInputSwordplayer1(m.value))}),o(14,"option",12),r(15,"Selecione ume swordplayer"),n(),h(16,De,2,2,"option",13),n(),o(17,"select",15,2),S("change",function(){u(s);let m=g(18);return b(i.getInputWeapon1(m.value))}),o(19,"option",12),r(20,"Selecione uma classe"),n(),h(21,Ae,3,4,"option",13),n(),_(22),o(23,"label",16),r(24,"Rounds ganhos 1"),n(),o(25,"input",17),N("ngModelChange",function(m){return u(s),k(i.roundsScored1,m)||(i.roundsScored1=m),b(m)}),n(),y(),n(),o(26,"div",18)(27,"h3"),r(28,"Swordplayer 2"),n(),o(29,"select",19,3),S("change",function(){u(s);let m=g(30);return b(i.getInputClan2(m.value))}),o(31,"option",12),r(32,"Selecione o cl\xE3"),n(),h(33,Le,4,7,"option",13),n(),o(34,"select",20,4),S("change",function(){u(s);let m=g(35);return b(i.getInputSwordplayer2(m.value))}),o(36,"option",12),r(37,"Selecione ume swordplayer"),n(),h(38,Pe,2,2,"option",13),n(),o(39,"select",21,5),S("change",function(){u(s);let m=g(40);return b(i.getInputWeapon2(m.value))}),o(41,"option",12),r(42,"Selecione uma classe"),n(),h(43,Ue,3,4,"option",13),n(),_(44),o(45,"label",16),r(46,"Rounds ganhos 1"),n(),o(47,"input",22),N("ngModelChange",function(m){return u(s),k(i.roundsScored2,m)||(i.roundsScored2=m),b(m)}),n(),y(),n(),o(48,"div",23)(49,"button",24),S("click",function(){return u(s),b(i.toMenu())}),r(50,"Voltar"),n(),o(51,"button",25),S("click",function(){return u(s),b(i.newCombat(i.idSwp1,i.idWeapon1,i.roundsScored1,i.idSwp2,i.idWeapon2,i.roundsScored2))}),r(52,"Registrar"),n()()()()()()}e&2&&(p(11),w("ngForOf",i.clans),p(5),w("ngForOf",i.swordplayers1),p(5),w("ngForOf",i.weapons),p(4),M("ngModel",i.roundsScored1),p(8),w("ngForOf",i.clans),p(5),w("ngForOf",i.swordplayers2),p(5),w("ngForOf",i.weapons),p(4),M("ngModel",i.roundsScored2))},dependencies:[F,te,q,$,L,ie,P,Z,oe,ne,U,ee,O,T],encapsulation:2})};function qe(a,t){if(a&1){let e=I();_(0),o(1,"tr")(2,"td"),r(3),l(4,"uppercase"),n(),o(5,"td"),r(6),l(7,"titlecase"),n(),o(8,"td"),r(9),l(10,"titlecase"),n(),o(11,"td"),r(12),n(),o(13,"td",6)(14,"button",7),S("click",function(){let s=u(e).$implicit,c=E();return b(c.toCombatEdit(s.id))}),W(15,"i",8),n()(),o(16,"td",6)(17,"button",9),S("click",function(){let s=u(e).$implicit,c=E();return b(c.deleteCombat(s.id,s.swp1.nickname,s.swp2.nickname))}),W(18,"i",10),n()()(),o(19,"tr")(20,"td"),r(21),l(22,"uppercase"),n(),o(23,"td"),r(24),l(25,"titlecase"),n(),o(26,"td"),r(27),l(28,"titlecase"),n(),o(29,"td"),r(30),n()(),W(31,"br"),y()}if(a&2){let e=t.$implicit;p(3),f(d(4,12,e.swp1.clan.abbreviation)),p(3),f(d(7,14,e.swp1.nickname)),p(3),f(d(10,16,e.weapon1.name)),p(2),le("bg-success",e.roundsScored1-e.roundsScored2>0),p(),f(e.roundsScored1),p(9),f(d(22,18,e.swp2.clan.abbreviation)),p(3),f(d(25,20,e.swp2.nickname)),p(3),f(d(28,22,e.weapon2.name)),p(2),le("bg-success",e.roundsScored2-e.roundsScored1>0),p(),f(e.roundsScored2)}}var ae=class a{constructor(t,e,i,s){this.combatServ=t;this.routeService=e;this.authService=i;this.errorService=s}subscriptions=new j;combats=[];ngOnInit(){this.refreshData()}ngOnDestroy(){this.subscriptions.unsubscribe()}getCombats(){this.subscriptions.add=this.combatServ.getAllCombats().subscribe({next:t=>{this.combats=t.data,t.token&&this.authService.updateToken(t.token)},error:t=>{this.errorService.handler(t)}})}deleteCombat(t,e,i){window.confirm(`Remover combate entre ${e} e ${i}?`)&&(this.subscriptions.add=this.combatServ.deleteCombat(t).subscribe({complete:()=>{window.alert("Combate removido")},error:c=>{this.errorService.handler(c)}}))}toCombatEdit(t){this.routeService.navigate.toCombatEdit(t)}refreshData(){this.getCombats()}static \u0275fac=function(e){return new(e||a)(v(A),v(B),v(R),v(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-list"]],standalone:!1,decls:18,vars:1,consts:[[1,"d-flex","justify-content-around","my-3"],[3,"refreshData"],[1,"table","table-striped","table-bordered","text-center","table-sm"],["colspan","1",1,"fs-4"],["colspan","2",1,"fs-4"],[4,"ngFor","ngForOf"],["rowspan","2",1,"align-middle"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"]],template:function(e,i){e&1&&(o(0,"div",0),W(1,"app-button-back-to-menu"),o(2,"app-button-refresh-data",1),S("refreshData",function(){return i.refreshData()}),n()(),o(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),r(7,"Cl\xE3"),n(),o(8,"th",3),r(9,"Swp"),n(),o(10,"th",3),r(11,"Classe"),n(),o(12,"th",3),r(13,"Rounds"),n(),o(14,"th",4),r(15,"A\xE7\xF5es"),n()()(),o(16,"tbody"),h(17,qe,32,24,"ng-container",5),n()()),e&2&&(p(17),w("ngForOf",i.combats))},dependencies:[F,Ve,Me,O,T],encapsulation:2})};function $e(a,t){if(a&1&&(o(0,"option",25),r(1),l(2,"titlecase"),n()),a&2){let e=t.$implicit,i=E();C("value",e.id),w("selected",e.id==i.combat.weapon1.id),p(),f(d(2,3,e.name))}}function Ge(a,t){if(a&1&&(o(0,"option",25),r(1),l(2,"titlecase"),n()),a&2){let e=t.$implicit,i=E();C("value",e.id),w("selected",e.id==i.combat.weapon2.id),p(),f(d(2,3,e.name))}}var se=class a{constructor(t,e,i,s,c,m){this.weaponService=t;this.routeService=e;this.combatService=i;this.route=s;this.authService=c;this.errorService=m}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.idCombat=this.route.snapshot.params.id,this.getCombatById(this.idCombat),this.getWeapons()}subscriptions=new j;idCombat;combat;weapons=[];weapons1=[];weapons2=[];getCombatById(t){this.subscriptions.add=this.combatService.getCombatById(t).subscribe({next:e=>{this.combat=e.data,e.token&&this.authService.updateToken(e.token)},error:e=>{this.errorService.handler(e)}})}getInputWeapon1(t){this.combat.weapon1.id=Number(t)}getInputWeapon2(t){this.combat.weapon2.id=Number(t)}getWeapons(){this.subscriptions.add=this.weaponService.getAllWeapons().subscribe({next:t=>{this.weapons=t.data,t.token&&this.authService.updateToken(t.token)},error:t=>{this.errorService.handler(t)}})}updateCombat(){if(!this.combat)return window.alert("N\xE3o foi identificado combate");if(!this.combat.swp1||!this.combat.swp1)return window.alert("N\xE3o h\xE1 swordplayers registrados no combate");this.combatService.validateCombat(1,this.combat.weapon1.id,this.combat.roundsScored1,2,this.combat.weapon2.id,this.combat.roundsScored2)&&(this.subscriptions.add=this.combatService.updateCombat(this.idCombat,this.combat.weapon1.id,this.combat.weapon2.id,this.combat.roundsScored1,this.combat.roundsScored2).subscribe({complete:()=>this.toCombatsList(),error:e=>{this.errorService.handler(e)}}))}toCombatsList(){this.routeService.navigate.toCombatSearch()}static \u0275fac=function(e){return new(e||a)(v(G),v(B),v(A),v(Ie),v(R),v(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-edit"]],standalone:!1,decls:51,vars:22,consts:[["clanInput1",""],["swordplayerInput1",""],["weaponInput1",""],["clanInput2",""],["swordplayerInput2",""],["weaponInput2",""],[1,"container"],[1,"row"],[1,"col-12"],["action",""],["id","swordplayerDiv1",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan1","id","clan1",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer1","id","swordplayer1",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon1","id","weapon1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],["for","roundsScored1"],["type","number","min","0","max","2","name","roundsScored1",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],["id","swordplayerDiv2",1,"d-flex","flex-column","justify-content-center","align-itens-center"],["disabled","","name","clan2","id","clan2",1,"rounded","mb-3","text-center","p-1","fs-6"],["disabled","","name","swordplayer2","id","swordplayer2",1,"rounded","mb-3","text-center","p-1","fs-6"],["name","weapon2","id","weapon2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"change"],["type","number","min","0","max","2","name","roundsScored2",1,"rounded","mb-3","text-center","p-1","fs-6",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-around"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"selected","value"]],template:function(e,i){if(e&1){let s=I();o(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9)(4,"div",10)(5,"h3"),r(6,"Swordplayer 1"),n(),o(7,"select",11,0)(9,"option"),r(10),l(11,"titlecase"),l(12,"uppercase"),n()(),o(13,"select",12,1)(15,"option"),r(16),l(17,"titlecase"),n()(),o(18,"select",13,2),S("change",function(){u(s);let m=g(19);return b(i.getInputWeapon1(m.value))}),h(20,$e,3,5,"option",14),n(),_(21),o(22,"label",15),r(23,"Rounds ganhos 1"),n(),o(24,"input",16),N("ngModelChange",function(m){return u(s),k(i.combat.roundsScored1,m)||(i.combat.roundsScored1=m),b(m)}),n(),y(),n(),o(25,"div",17)(26,"h3"),r(27,"Swordplayer 2"),n(),o(28,"select",18,3)(30,"option"),r(31),l(32,"titlecase"),l(33,"uppercase"),n()(),o(34,"select",19,4)(36,"option"),r(37),l(38,"titlecase"),n()(),o(39,"select",20,5),S("change",function(){u(s);let m=g(40);return b(i.getInputWeapon2(m.value))}),h(41,Ge,3,5,"option",14),n(),_(42),o(43,"label",15),r(44,"Rounds ganhos 1"),n(),o(45,"input",21),N("ngModelChange",function(m){return u(s),k(i.combat.roundsScored2,m)||(i.combat.roundsScored2=m),b(m)}),n(),y(),n(),o(46,"div",22)(47,"button",23),S("click",function(){return u(s),b(i.toCombatsList())}),r(48,"Voltar"),n(),o(49,"button",24),S("click",function(){return u(s),b(i.updateCombat())}),r(50,"Atualizar"),n()()()()()()}e&2&&(p(10),x("",d(11,10,i.combat.swp1.clan.full_name)," | ",d(12,12,i.combat.swp1.clan.abbreviation),""),p(6),f(d(17,14,i.combat.swp1.nickname)),p(4),w("ngForOf",i.weapons),p(4),M("ngModel",i.combat.roundsScored1),p(7),x("",d(32,16,i.combat.swp2.clan.full_name)," | ",d(33,18,i.combat.swp1.clan.abbreviation),""),p(6),f(d(38,20,i.combat.swp2.nickname)),p(4),w("ngForOf",i.weapons),p(4),M("ngModel",i.combat.roundsScored2))},dependencies:[F,te,q,$,L,ie,P,Z,oe,ne,U,ee,O,T],encapsulation:2})};function He(a,t){if(a&1&&(o(0,"option",19),r(1),l(2,"uppercase"),l(3,"titlecase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),x("",d(2,3,e.clan.abbreviation)," | ",d(3,5,e.nickname),"")}}function Ye(a,t){if(a&1&&(o(0,"option",19),r(1),l(2,"uppercase"),l(3,"titlecase"),n()),a&2){let e=t.$implicit;C("value",e.id),p(),x("",d(2,3,e.clan.abbreviation)," | ",d(3,5,e.nickname),"")}}function ze(a,t){if(a&1){let e=I();_(0),o(1,"div")(2,"table",21)(3,"thead")(4,"tr")(5,"th"),r(6,"Cl\xE3s"),n(),o(7,"th"),r(8,"Swordplayers"),n(),o(9,"th"),r(10,"Armas"),n(),o(11,"th"),r(12,"Rounds"),n(),o(13,"th",22),r(14,"A\xE7\xF5es"),n()()(),o(15,"tbody")(16,"tr")(17,"td"),r(18),l(19,"uppercase"),n(),o(20,"td"),r(21),l(22,"titlecase"),n(),o(23,"td"),r(24),l(25,"titlecase"),n(),o(26,"td"),r(27),n(),o(28,"td",23)(29,"button",16),S("click",function(){u(e);let s=E(2);return b(s.toCombatEdit(s.combat.id))}),W(30,"i",24),n()(),o(31,"td",23)(32,"button",25),S("click",function(){u(e);let s=E(2);return b(s.deleteCombat(s.combat.id,s.combat.swp1.nickname,s.combat.swp2.nickname))}),W(33,"i",26),n()()(),o(34,"tr")(35,"td"),r(36),l(37,"uppercase"),n(),o(38,"td"),r(39),l(40,"titlecase"),n(),o(41,"td"),r(42),l(43,"titlecase"),n(),o(44,"td"),r(45),n()()()()(),y()}if(a&2){let e=E(2);p(18),f(d(19,8,e.combat.swp1.clan.abbreviation)),p(3),f(d(22,10,e.combat.swp1.nickname)),p(3),f(d(25,12,e.combat.weapon1.name)),p(3),f(e.combat.roundsScored1),p(9),f(d(37,14,e.combat.swp2.clan.abbreviation)),p(3),f(d(40,16,e.combat.swp2.nickname)),p(3),f(d(43,18,e.combat.weapon2.name)),p(3),f(e.combat.roundsScored2)}}function Je(a,t){if(a&1&&(_(0),h(1,ze,46,20,"ng-container",20),y()),a&2){let e=E(),i=g(31);p(),w("ngIf",e.combat&&e.combatFound)("ngIfElse",i)}}function Ke(a,t){a&1&&(o(0,"div",27)(1,"div",5)(2,"div",6)(3,"div",28)(4,"h1",29),r(5,"Combate n\xE3o encontrado"),n()()()()())}var pe=class a{constructor(t,e,i,s,c){this.routeService=t;this.combatService=e;this.swpService=i;this.authService=s;this.errorService=c}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnInit(){this.getSwordplayers()}subscriptions=new j;combatRequested=!1;combatFound=!0;swordplayers=[];swpMap={};combat;swpFilter1="";swpFilter2="";swpId1=0;swpId2=0;getSwordplayers(){this.subscriptions.add=this.swpService.getAllSwordplayers().subscribe({next:t=>this.swordplayers=t.data,complete:()=>this.swpMap=this.swpService.mapSwordplayers(this.swordplayers),error:t=>{this.errorService.handler(t)}})}getSwp1(t){this.swpId1=Number(t)}getSwp2(t){this.swpId2=Number(t)}searchCombat(t,e){if(!t||!e)return window.alert("Por favor, selecione os dois swordplayers");if(t==e)return window.alert("Escolha swordplayers diferentes");this.subscriptions.add=this.combatService.getCombatByBothSwordplayers(t,e).subscribe({next:i=>{i.token&&this.authService.updateToken(i.token),this.combat=i.data},complete:()=>{if(t==this.combat.swp1.id){let i=this.swpMap[t];this.combat.swp1=this.swordplayers[i];let s=this.swpMap[e];this.combat.swp2=this.swordplayers[s]}else{let i=this.swpMap[e];this.combat.swp1=this.swordplayers[i];let s=this.swpMap[t];this.combat.swp2=this.swordplayers[s]}this.combatFound=!0},error:i=>{if(i.status==404){this.combatFound=!1;return}this.errorService.handler(i)}}),this.combatRequested=!0}deleteCombat(t,e,i){window.confirm(`Remover combate entre ${e} e ${i}?`)&&(this.subscriptions.add=this.combatService.deleteCombat(t).subscribe({complete:()=>{window.alert("Combate removido")},error:c=>{if(c.status==404)return window.alert("Combate n\xE3o encontrado");this.errorService.handler(c)}}))}toCombatEdit(t){this.routeService.navigate.toCombatEdit(t)}clearFilter(){this.swpFilter1="",this.swpFilter2=""}static \u0275fac=function(e){return new(e||a)(v(B),v(A),v(X),v(R),v(D))};static \u0275cmp=V({type:a,selectors:[["app-combat-search"]],standalone:!1,decls:32,vars:11,consts:[["swpInput1",""],["swpInput2",""],["combatNotFound",""],[1,"mb-3","text-center"],[1,"container","border","rounded","m-2","bg-dark","bg-opacity-75"],[1,"row"],[1,"col"],[1,"d-flex","flex-column","justify-content-center","align-itens-center"],["type","text","placeholder","Filtrar cl\xE3 ou swordplayer 1",1,"text-center","form-control","m-1",3,"ngModelChange","ngModel"],["name","swp1","id","swp1",1,"form-select","m-1",3,"change"],["selected","","value","0"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Filtrar cl\xE3 ou swordplayer 2",1,"text-center","form-control","m-1",3,"ngModelChange","ngModel"],["name","swp2","id","swp2",1,"form-select","m-1",3,"change"],[1,"d-flex","justify-content-around","m-3"],[1,"btn","btn-outline-warning",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-center"],[4,"ngIf"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"table","table-bordered","text-center"],["colspan","2"],["rowspan","2",1,"align-middle"],[1,"bi","bi-pencil-square"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash-fill"],[1,"container","m-2"],[1,"border","rounded","text-center","bg-warning","bg-opacity-75"],[1,"text-dark"]],template:function(e,i){if(e&1){let s=I();o(0,"h1",3),r(1,"Procurar combate"),n(),o(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"input",8),N("ngModelChange",function(m){return u(s),k(i.swpFilter1,m)||(i.swpFilter1=m),b(m)}),n(),o(7,"select",9,0),S("change",function(){u(s);let m=g(8);return b(i.getSwp1(m.value))}),o(9,"option",10),r(10,"SELECIONE UME SWORDPLAYER"),n(),h(11,He,4,7,"option",11),l(12,"findSwordplayer"),n()()(),o(13,"div",6)(14,"div",7)(15,"input",12),N("ngModelChange",function(m){return u(s),k(i.swpFilter2,m)||(i.swpFilter2=m),b(m)}),n(),o(16,"select",13,1),S("change",function(){u(s);let m=g(17);return b(i.getSwp2(m.value))}),o(18,"option",10),r(19,"SELECIONE UME SWORDPLAYER"),n(),h(20,Ye,4,7,"option",11),l(21,"findSwordplayer"),n()()()(),o(22,"div",5)(23,"div",14)(24,"button",15),S("click",function(){return u(s),b(i.clearFilter())}),r(25,"Limpar filtros"),n(),o(26,"button",16),S("click",function(){return u(s),b(i.searchCombat(i.swpId1,i.swpId2))}),r(27,"Pesquisar"),n()()()(),o(28,"div",17),h(29,Je,2,2,"ng-container",18)(30,Ke,6,0,"ng-template",null,2,Ce),n()}e&2&&(p(6),M("ngModel",i.swpFilter1),p(5),w("ngForOf",de(12,5,i.swordplayers,i.swpFilter1)),p(4),M("ngModel",i.swpFilter2),p(5),w("ngForOf",de(21,8,i.swordplayers,i.swpFilter2)),p(9),w("ngIf",i.combatRequested))},dependencies:[F,_e,q,$,L,P,U,O,T,ke],encapsulation:2})};var Qe=[{path:"new",component:re,canActivate:[Y,z]},{path:"list",component:ae,canActivate:[Y,z]},{path:"search",component:pe,canActivate:[Y,z]},{path:"edit/:id",component:se,canActivate:[Y,z]}],me=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Q({type:a});static \u0275inj=K({imports:[ue.forChild(Qe),ue]})};var Te=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=Q({type:a});static \u0275inj=K({imports:[ye,me]})};export{Te as CombatModule};
